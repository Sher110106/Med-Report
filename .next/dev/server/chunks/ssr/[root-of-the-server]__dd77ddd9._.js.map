{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/sher/project/Med/components/ImageUploader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport Image from \"next/image\";\n\ninterface ImageUploaderProps {\n  onImageSelect: (file: File) => void;\n}\n\nexport default function ImageUploader({ onImageSelect }: ImageUploaderProps) {\n  const [preview, setPreview] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      onImageSelect(file);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-2xl\">\n      <div\n        onClick={() => fileInputRef.current?.click()}\n        className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors\"\n      >\n        {preview ? (\n          <div className=\"relative w-full h-64\">\n            <Image\n              src={preview}\n              alt=\"Preview\"\n              fill\n              className=\"object-contain\"\n            />\n          </div>\n        ) : (\n          <div>\n            <svg\n              className=\"mx-auto h-12 w-12 text-gray-400\"\n              stroke=\"currentColor\"\n              fill=\"none\"\n              viewBox=\"0 0 48 48\"\n            >\n              <path\n                d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </svg>\n            <p className=\"mt-2 text-sm text-gray-600\">\n              Click to upload medical note image\n            </p>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              PNG, JPG up to 10MB\n            </p>\n          </div>\n        )}\n      </div>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileChange}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS,cAAc,EAAE,aAAa,EAAsB;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mOAAQ,EAAgB;IACtD,MAAM,eAAe,IAAA,iOAAM,EAAmB;IAE9C,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,MAAM;YACR,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACjB,WAAW,OAAO,MAAM;YAC1B;YACA,OAAO,aAAa,CAAC;YAErB,cAAc;QAChB;IACF;IAEA,qBACE,gQAAC;QAAI,WAAU;;0BACb,gQAAC;gBACC,SAAS,IAAM,aAAa,OAAO,EAAE;gBACrC,WAAU;0BAET,wBACC,gQAAC;oBAAI,WAAU;8BACb,cAAA,gQAAC,0JAAK;wBACJ,KAAK;wBACL,KAAI;wBACJ,IAAI;wBACJ,WAAU;;;;;;;;;;yCAId,gQAAC;;sCACC,gQAAC;4BACC,WAAU;4BACV,QAAO;4BACP,MAAK;4BACL,SAAQ;sCAER,cAAA,gQAAC;gCACC,GAAE;gCACF,aAAa;gCACb,eAAc;gCACd,gBAAe;;;;;;;;;;;sCAGnB,gQAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAG1C,gQAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;;;;;;0BAMhD,gQAAC;gBACC,KAAK;gBACL,MAAK;gBACL,QAAO;gBACP,UAAU;gBACV,WAAU;;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/sher/project/Med/components/ProcessingOptions.tsx"],"sourcesContent":["\"use client\";\n\ntype ProcessingMode = \"direct\" | \"two-stage\" | \"azure-two-stage\" | \"gemini-labs\" | \"azure-labs\";\n\ninterface ProcessingOptionsProps {\n  selectedMode: ProcessingMode;\n  onModeChange: (mode: ProcessingMode) => void;\n  onProcess: () => void;\n  isProcessing: boolean;\n  disabled: boolean;\n}\n\nexport default function ProcessingOptions({\n  selectedMode,\n  onModeChange,\n  onProcess,\n  isProcessing,\n  disabled,\n}: ProcessingOptionsProps) {\n  return (\n    <div className=\"w-full max-w-2xl space-y-4\">\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Processing Mode</h3>\n\n        <div className=\"space-y-3\">\n          {/* SOAP Extraction Options */}\n          <div className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2\">\n            SOAP Note Extraction\n          </div>\n\n          <label className=\"flex items-start space-x-3 cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"mode\"\n              value=\"direct\"\n              checked={selectedMode === \"direct\"}\n              onChange={() => onModeChange(\"direct\")}\n              className=\"mt-1\"\n            />\n            <div>\n              <div className=\"font-medium\">Direct Processing (Fast)</div>\n              <div className=\"text-sm text-gray-600\">\n                Image → Gemini Pro → SOAP JSON\n                <br />\n                <span className=\"text-xs text-gray-500\">\n                  Single-stage extraction with built-in OCR correction\n                </span>\n              </div>\n            </div>\n          </label>\n\n          <label className=\"flex items-start space-x-3 cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"mode\"\n              value=\"two-stage\"\n              checked={selectedMode === \"two-stage\"}\n              onChange={() => onModeChange(\"two-stage\")}\n              className=\"mt-1\"\n            />\n            <div>\n              <div className=\"font-medium\">Two-Stage (Gemini)</div>\n              <div className=\"text-sm text-gray-600\">\n                Image → Gemini Flash (OCR) → Gemini Pro → SOAP JSON\n                <br />\n                <span className=\"text-xs text-gray-500\">\n                  Raw OCR extraction followed by structured analysis\n                </span>\n              </div>\n            </div>\n          </label>\n\n          <label className=\"flex items-start space-x-3 cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"mode\"\n              value=\"azure-two-stage\"\n              checked={selectedMode === \"azure-two-stage\"}\n              onChange={() => onModeChange(\"azure-two-stage\")}\n              className=\"mt-1\"\n            />\n            <div>\n              <div className=\"font-medium\">Two-Stage (Azure OpenAI)</div>\n              <div className=\"text-sm text-gray-600\">\n                Image → Gemini Flash (OCR) → GPT-5-mini → SOAP JSON\n                <br />\n                <span className=\"text-xs text-gray-500\">\n                  Raw OCR extraction + Azure OpenAI for structured analysis\n                </span>\n              </div>\n            </div>\n          </label>\n\n          {/* Labs Extraction Options */}\n          <div className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide mt-4 mb-2 pt-3 border-t\">\n            Labs & Diagnostics Extraction\n          </div>\n\n          <label className=\"flex items-start space-x-3 cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"mode\"\n              value=\"gemini-labs\"\n              checked={selectedMode === \"gemini-labs\"}\n              onChange={() => onModeChange(\"gemini-labs\")}\n              className=\"mt-1\"\n            />\n            <div>\n              <div className=\"font-medium\">Labs Extraction (Gemini)</div>\n              <div className=\"text-sm text-gray-600\">\n                Image → Gemini Flash (OCR) → Gemini Pro → Labs JSON\n                <br />\n                <span className=\"text-xs text-gray-500\">\n                  Focused on diagnostics, lab results, and medications\n                </span>\n              </div>\n            </div>\n          </label>\n\n          <label className=\"flex items-start space-x-3 cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"mode\"\n              value=\"azure-labs\"\n              checked={selectedMode === \"azure-labs\"}\n              onChange={() => onModeChange(\"azure-labs\")}\n              className=\"mt-1\"\n            />\n            <div>\n              <div className=\"font-medium\">Labs Extraction (Azure OpenAI)</div>\n              <div className=\"text-sm text-gray-600\">\n                Image → Gemini Flash (OCR) → GPT-5-mini → Labs JSON\n                <br />\n                <span className=\"text-xs text-gray-500\">\n                  Focused on diagnostics, lab results, and medications\n                </span>\n              </div>\n            </div>\n          </label>\n        </div>\n      </div>\n\n      <button\n        onClick={onProcess}\n        disabled={disabled || isProcessing}\n        className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\n      >\n        {isProcessing ? \"Processing...\" : \"Extract Data\"}\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAYe,SAAS,kBAAkB,EACxC,YAAY,EACZ,YAAY,EACZ,SAAS,EACT,YAAY,EACZ,QAAQ,EACe;IACvB,qBACE,gQAAC;QAAI,WAAU;;0BACb,gQAAC;gBAAI,WAAU;;kCACb,gQAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAE3C,gQAAC;wBAAI,WAAU;;0CAEb,gQAAC;gCAAI,WAAU;0CAAmE;;;;;;0CAIlF,gQAAC;gCAAM,WAAU;;kDACf,gQAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAM;wCACN,SAAS,iBAAiB;wCAC1B,UAAU,IAAM,aAAa;wCAC7B,WAAU;;;;;;kDAEZ,gQAAC;;0DACC,gQAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,gQAAC;gDAAI,WAAU;;oDAAwB;kEAErC,gQAAC;;;;;kEACD,gQAAC;wDAAK,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;;;;;;;0CAO9C,gQAAC;gCAAM,WAAU;;kDACf,gQAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAM;wCACN,SAAS,iBAAiB;wCAC1B,UAAU,IAAM,aAAa;wCAC7B,WAAU;;;;;;kDAEZ,gQAAC;;0DACC,gQAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,gQAAC;gDAAI,WAAU;;oDAAwB;kEAErC,gQAAC;;;;;kEACD,gQAAC;wDAAK,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;;;;;;;0CAO9C,gQAAC;gCAAM,WAAU;;kDACf,gQAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAM;wCACN,SAAS,iBAAiB;wCAC1B,UAAU,IAAM,aAAa;wCAC7B,WAAU;;;;;;kDAEZ,gQAAC;;0DACC,gQAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,gQAAC;gDAAI,WAAU;;oDAAwB;kEAErC,gQAAC;;;;;kEACD,gQAAC;wDAAK,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;;;;;;;0CAQ9C,gQAAC;gCAAI,WAAU;0CAAsF;;;;;;0CAIrG,gQAAC;gCAAM,WAAU;;kDACf,gQAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAM;wCACN,SAAS,iBAAiB;wCAC1B,UAAU,IAAM,aAAa;wCAC7B,WAAU;;;;;;kDAEZ,gQAAC;;0DACC,gQAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,gQAAC;gDAAI,WAAU;;oDAAwB;kEAErC,gQAAC;;;;;kEACD,gQAAC;wDAAK,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;;;;;;;0CAO9C,gQAAC;gCAAM,WAAU;;kDACf,gQAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAM;wCACN,SAAS,iBAAiB;wCAC1B,UAAU,IAAM,aAAa;wCAC7B,WAAU;;;;;;kDAEZ,gQAAC;;0DACC,gQAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,gQAAC;gDAAI,WAAU;;oDAAwB;kEAErC,gQAAC;;;;;kEACD,gQAAC;wDAAK,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASlD,gQAAC;gBACC,SAAS;gBACT,UAAU,YAAY;gBACtB,WAAU;0BAET,eAAe,kBAAkB;;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 502, "column": 0}, "map": {"version":3,"sources":["file:///Users/sher/project/Med/components/ResultsDisplay.tsx"],"sourcesContent":["\"use client\";\n\nimport { SOAPNote } from \"@/lib/types\";\n\ninterface ResultsDisplayProps {\n  soapData?: SOAPNote;\n  rawText?: string;\n  processingTime?: number;\n  showRawText?: boolean;\n}\n\nexport default function ResultsDisplay({\n  soapData,\n  rawText,\n  processingTime,\n  showRawText,\n}: ResultsDisplayProps) {\n  if (!soapData && !rawText) return null;\n\n  return (\n    <div className=\"w-full max-w-4xl space-y-4\">\n      {processingTime && (\n        <div className=\"text-sm text-gray-600 text-right\">\n          Processing time: {(processingTime / 1000).toFixed(2)}s\n        </div>\n      )}\n\n      {showRawText && rawText && (\n        <div className=\"bg-gray-50 rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold mb-3\">Raw OCR Text</h3>\n          <pre className=\"whitespace-pre-wrap text-sm font-mono bg-white p-4 rounded border\">\n            {rawText}\n          </pre>\n        </div>\n      )}\n\n      {soapData && (\n        <div className=\"bg-white rounded-lg shadow-lg p-6 space-y-6\">\n          <h2 className=\"text-2xl font-bold\">SOAP Note</h2>\n\n          {/* Subjective */}\n          <section>\n            <h3 className=\"text-xl font-semibold text-blue-600 mb-2\">\n              Subjective\n            </h3>\n            <div className=\"space-y-2 pl-4\">\n              <div>\n                <span className=\"font-medium\">Chief Complaint:</span>{\" \"}\n                {soapData.soap_note.subjective.chief_complaint}\n              </div>\n              <div>\n                <span className=\"font-medium\">HPI:</span>{\" \"}\n                {soapData.soap_note.subjective.hpi}\n              </div>\n              {soapData.soap_note.subjective.symptoms.length > 0 && (\n                <div>\n                  <span className=\"font-medium\">Symptoms:</span>\n                  <ul className=\"list-disc list-inside ml-4\">\n                    {soapData.soap_note.subjective.symptoms.map((s, i) => (\n                      <li key={i}>{s}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </section>\n\n          {/* Objective */}\n          <section>\n            <h3 className=\"text-xl font-semibold text-green-600 mb-2\">\n              Objective\n            </h3>\n            <div className=\"space-y-3 pl-4\">\n              <div>\n                <span className=\"font-medium\">Vitals:</span>\n                <div className=\"grid grid-cols-2 gap-2 ml-4 mt-1\">\n                  {Object.entries(soapData.soap_note.objective.vitals).map(\n                    ([key, value]) => (\n                      <div key={key} className=\"text-sm\">\n                        <span className=\"uppercase text-gray-600\">{key}:</span>{\" \"}\n                        {value || \"N/A\"}\n                      </div>\n                    )\n                  )}\n                </div>\n              </div>\n              {soapData.soap_note.objective.physical_exam.findings.length >\n                0 && (\n                <div>\n                  <span className=\"font-medium\">Physical Exam:</span>\n                  <ul className=\"list-disc list-inside ml-4\">\n                    {soapData.soap_note.objective.physical_exam.findings.map(\n                      (f, i) => (\n                        <li key={i}>{f}</li>\n                      )\n                    )}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </section>\n\n          {/* Assessment */}\n          <section>\n            <h3 className=\"text-xl font-semibold text-orange-600 mb-2\">\n              Assessment\n            </h3>\n            <div className=\"space-y-2 pl-4\">\n              <div className=\"bg-orange-50 p-3 rounded\">\n                <div className=\"font-medium\">\n                  {soapData.soap_note.assessment.primary_diagnosis.value}\n                </div>\n                <div className=\"text-sm text-gray-600 mt-1\">\n                  Confidence:{\" \"}\n                  {(\n                    soapData.soap_note.assessment.primary_diagnosis\n                      .certainty_degree * 100\n                  ).toFixed(0)}\n                  %\n                </div>\n                <div className=\"text-xs text-gray-500 mt-1 italic\">\n                  Evidence: \"\n                  {soapData.soap_note.assessment.primary_diagnosis.evidence_text}\n                  \"\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Plan */}\n          <section>\n            <h3 className=\"text-xl font-semibold text-purple-600 mb-2\">Plan</h3>\n            <div className=\"space-y-3 pl-4\">\n              {soapData.soap_note.plan.medications.length > 0 && (\n                <div>\n                  <span className=\"font-medium\">Medications:</span>\n                  <div className=\"space-y-2 ml-4 mt-2\">\n                    {soapData.soap_note.plan.medications.map((med, i) => (\n                      <div key={i} className=\"bg-purple-50 p-3 rounded\">\n                        <div className=\"font-medium\">\n                          {med.drug} {med.dosage}\n                        </div>\n                        <div className=\"text-sm\">{med.sig}</div>\n                        <div className=\"text-xs text-gray-500\">\n                          Confidence: {(med.handwriting_confidence * 100).toFixed(0)}%\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {soapData.soap_note.plan.patient_instructions && (\n                <div>\n                  <span className=\"font-medium\">Instructions:</span>{\" \"}\n                  {soapData.soap_note.plan.patient_instructions}\n                </div>\n              )}\n            </div>\n          </section>\n\n          {/* Metadata */}\n          <section className=\"border-t pt-4\">\n            <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">\n              Quality Metadata\n            </h3>\n            <div className=\"text-sm space-y-1 pl-4\">\n              <div>\n                <span className=\"font-medium\">OCR Quality:</span>{\" \"}\n                {soapData.metadata.ocr_quality_check}\n              </div>\n              {soapData.metadata.critical_ambiguities && (\n                <div className=\"text-red-600\">\n                  <span className=\"font-medium\">⚠️ Ambiguities:</span>{\" \"}\n                  {soapData.metadata.critical_ambiguities}\n                </div>\n              )}\n            </div>\n          </section>\n\n          {/* Download JSON */}\n          <button\n            onClick={() => {\n              const blob = new Blob([JSON.stringify(soapData, null, 2)], {\n                type: \"application/json\",\n              });\n              const url = URL.createObjectURL(blob);\n              const a = document.createElement(\"a\");\n              a.href = url;\n              a.download = \"soap-note.json\";\n              a.click();\n            }}\n            className=\"w-full bg-gray-200 text-gray-800 py-2 rounded hover:bg-gray-300 transition-colors\"\n          >\n            Download JSON\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1025, "column": 0}, "map": {"version":3,"sources":["file:///Users/sher/project/Med/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport ImageUploader from \"@/components/ImageUploader\";\nimport ProcessingOptions from \"@/components/ProcessingOptions\";\nimport ResultsDisplay from \"@/components/ResultsDisplay\";\nimport { SOAPNote } from \"@/lib/types\";\n\nexport default function Home() {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [processingMode, setProcessingMode] = useState<\"direct\" | \"two-stage\" | \"azure-two-stage\">(\n    \"direct\"\n  );\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [soapData, setSOAPData] = useState<SOAPNote | undefined>();\n  const [rawOCRText, setRawOCRText] = useState<string | undefined>();\n  const [processingTime, setProcessingTime] = useState<number | undefined>();\n  const [error, setError] = useState<string | undefined>();\n\n  const handleDirectProcessing = async () => {\n    if (!selectedFile) return;\n\n    const formData = new FormData();\n    formData.append(\"image\", selectedFile);\n\n    const response = await fetch(\"/api/extract-direct\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const result = await response.json();\n    if (result.success) {\n      setSOAPData(result.data);\n      setProcessingTime(result.processingTime);\n    } else {\n      throw new Error(result.error);\n    }\n  };\n\n  const handleTwoStageProcessing = async () => {\n    if (!selectedFile) return;\n\n    // Stage 1: OCR extraction\n    const formData = new FormData();\n    formData.append(\"image\", selectedFile);\n\n    const ocrResponse = await fetch(\"/api/extract-ocr\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const ocrResult = await ocrResponse.json();\n    if (!ocrResult.success) {\n      throw new Error(ocrResult.error);\n    }\n\n    setRawOCRText(ocrResult.rawText);\n\n    // Stage 2: SOAP extraction\n    const soapResponse = await fetch(\"/api/extract-soap\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ ocrText: ocrResult.rawText }),\n    });\n\n    const soapResult = await soapResponse.json();\n    if (soapResult.success) {\n      setSOAPData(soapResult.data);\n      setProcessingTime(soapResult.processingTime);\n    } else {\n      throw new Error(soapResult.error);\n    }\n  };\n\n  const handleAzureTwoStageProcessing = async () => {\n    if (!selectedFile) return;\n\n    // Stage 1: OCR extraction with Gemini Flash\n    const formData = new FormData();\n    formData.append(\"image\", selectedFile);\n\n    const ocrResponse = await fetch(\"/api/extract-ocr\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const ocrResult = await ocrResponse.json();\n    if (!ocrResult.success) {\n      throw new Error(ocrResult.error);\n    }\n\n    setRawOCRText(ocrResult.rawText);\n\n    // Stage 2: SOAP extraction with Azure OpenAI GPT-5-mini\n    const soapResponse = await fetch(\"/api/extract-soap-azure\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ ocrText: ocrResult.rawText }),\n    });\n\n    const soapResult = await soapResponse.json();\n    if (soapResult.success) {\n      setSOAPData(soapResult.data);\n      setProcessingTime(soapResult.processingTime);\n    } else {\n      throw new Error(soapResult.error);\n    }\n  };\n\n  const handleProcess = async () => {\n    setIsProcessing(true);\n    setError(undefined);\n    setSOAPData(undefined);\n    setRawOCRText(undefined);\n\n    try {\n      if (processingMode === \"direct\") {\n        await handleDirectProcessing();\n      } else if (processingMode === \"two-stage\") {\n        await handleTwoStageProcessing();\n      } else {\n        await handleAzureTwoStageProcessing();\n      }\n    } catch (err: any) {\n      setError(err.message || \"Processing failed\");\n      console.error(err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            Medical SOAP Note Extractor\n          </h1>\n          <p className=\"text-gray-600\">\n            AI-powered extraction from handwritten doctor's notes\n          </p>\n        </div>\n\n        <div className=\"flex flex-col items-center space-y-6\">\n          <ImageUploader onImageSelect={setSelectedFile} />\n\n          <ProcessingOptions\n            selectedMode={processingMode}\n            onModeChange={setProcessingMode}\n            onProcess={handleProcess}\n            isProcessing={isProcessing}\n            disabled={!selectedFile}\n          />\n\n          {error && (\n            <div className=\"w-full max-w-2xl bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded\">\n              <strong>Error:</strong> {error}\n            </div>\n          )}\n\n          {isProcessing && (\n            <div className=\"text-center\">\n              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n              <p className=\"mt-2 text-gray-600\">\n                {processingMode === \"direct\"\n                  ? \"Processing image...\"\n                  : processingMode === \"two-stage\"\n                  ? \"Stage 1: Extracting OCR text...\"\n                  : \"Stage 1: Extracting OCR text (Azure)...\"}\n              </p>\n            </div>\n          )}\n\n          <ResultsDisplay\n            soapData={soapData}\n            rawText={rawOCRText}\n            processingTime={processingTime}\n            showRawText={processingMode === \"two-stage\" || processingMode === \"azure-two-stage\"}\n          />\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}